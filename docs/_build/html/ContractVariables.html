
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Contract Variables &#8212; DataTokenAlpha  documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Internal Functions" href="InternalFunctions.html" />
    <link rel="prev" title="Welcome to DataTokenAlpha!" href="index.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="InternalFunctions.html" title="Internal Functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to DataTokenAlpha!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DataTokenAlpha  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="contract-variables">
<h1>Contract Variables<a class="headerlink" href="#contract-variables" title="Permalink to this headline">¶</a></h1>
<p>Contracts variables are declared at the beginning of solidity contract body.
In this section, variable types and availability are indicated by source code definition
below each mentioned variables.</p>
<div class="section" id="owner">
<h2>owner<a class="headerlink" href="#owner" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">address</span> <span class="nx">owner</span><span class="p">;</span>
</pre></div>
</div>
<p>Owner of the contract. It is the Ethereum address which is
the message sender of the transaction that has successfully deployed
DataTokenAlpha contract on Ethereum network.
Total supply (666,000,000,000 tokens) is assigned to this address initially.
That is, all usable tokens of this contract in Ethereum network are sold by this owner address.</p>
</div>
<div class="section" id="tokenname">
<h2>tokenName<a class="headerlink" href="#tokenname" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">string</span> <span class="kr">public</span> <span class="nx">tokenName</span> <span class="o">=</span> <span class="s2">&quot;DataToken&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>The name of token defined by this contract.
In current version, the contract is named “DataToken”.</p>
</div>
<div class="section" id="totalsupply">
<h2>totalSupply<a class="headerlink" href="#totalsupply" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">totalSupply</span> <span class="o">=</span> <span class="mi">666</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">;</span>
</pre></div>
</div>
<p>Total number of tokens is 666,000,000,000. Amount of Tokens only have discrete integer values.</p>
</div>
<div class="section" id="reportperiod">
<h2>reportPeriod<a class="headerlink" href="#reportperiod" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">reportPeriod</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span> <span class="c1">// sec</span>
</pre></div>
</div>
<p>Data usage information should be reported from frontend software
less than every 30 sec. This value can be changed by function tuner()</p>
</div>
<div class="section" id="coherencetime">
<h2>coherenceTime<a class="headerlink" href="#coherencetime" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">coherenceTime</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span> <span class="c1">// sec</span>
</pre></div>
</div>
<p>Within such time difference, two data usage report are considered as “synchronized”.</p>
</div>
<div class="section" id="tokenprice">
<h2>tokenPrice<a class="headerlink" href="#tokenprice" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">tokenPrice</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">;</span><span class="c1">// wei/DAT</span>
</pre></div>
</div>
<p>Price in wei to purchase each DataToken from the owner.</p>
</div>
<div class="section" id="usagetolerance">
<h2>usageTolerance<a class="headerlink" href="#usagetolerance" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">usageTolerance</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span><span class="c1">// MB</span>
</pre></div>
</div>
<p>Maximum allowed difference between frontend reported data usage
from the service provider and the receiver.</p>
</div>
<div class="section" id="apid-counter">
<h2>APID_counter<a class="headerlink" href="#apid-counter" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="kr">public</span> <span class="nx">APID_counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>For the first time that an address choose to be a provider,
this number is assigned to the address as the only ID of this
address in physical layer where the numerical ID is embedded in
SSID of the provder’s Wi-Fi AP.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following variables are of enum type.</p>
</div>
</div>
<div class="section" id="role">
<h2>role<a class="headerlink" href="#role" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kr">enum</span> <span class="nx">role</span> <span class="p">{</span><span class="nx">ISRECEIVER</span><span class="p">,</span> <span class="nx">ISPROVIDER</span><span class="p">,</span> <span class="nx">PAIRED</span><span class="p">}</span>
</pre></div>
</div>
<p>This variable defines three possible roles of contract users.
Numerically, identification has values:</p>
<ul class="simple">
<li>role.ISRECEIVER = 0</li>
<li>role.ISPROVIDER = 1</li>
<li>role.PAIRED = 2</li>
</ul>
</div>
<div class="section" id="forcepaytype">
<h2>forcePayType<a class="headerlink" href="#forcepaytype" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kr">enum</span> <span class="nx">forcePayType</span> <span class="p">{</span><span class="nx">FUSEOFPROVIDER</span><span class="p">,</span> <span class="nx">FUSEOFRECEIVER</span><span class="p">}</span>
</pre></div>
</div>
<p>This variable is a flag to show whether a invoice is triggered by fuse conditions
or initiated by the receiver’s call of function payAndLeave().</p>
<p>Numerically, forcePayType has values:
* forcePayType.FUSEOFPROVIDER = 0
* forcePayType.FUSEOFRECEIVER = 1</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following variables are of mapping type.</p>
<p class="last"><a class="reference external" href="http://solidity.readthedocs.io/en/develop/types.html?#mappings">Click to find mapping in solidity documentation</a></p>
</div>
</div>
<div class="section" id="identification">
<h2>identification<a class="headerlink" href="#identification" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">role</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">identification</span><span class="p">;</span>
</pre></div>
</div>
<p>This mapping takes Ethereum address as key and role (enum type) as the mapped value.</p>
<p>By default, any unassigned value is recognized as 0, therefore,
Ethereum addresses automatically have <em>role.ISRECEIVER</em> (numerical value is 0) as mapping values of <a class="reference internal" href="#identification">identification</a>.</p>
<p>When a receiver address calls function <span class="xref std std-ref">surProvider</span>,
<em>identification</em> mapping value of this address will be changed to <em>role.ISPROVIDER</em> (numerical value is 1).</p>
<p>When a receiver address has called function <span class="xref std std-ref">link</span> successfully,
mapping value of the address will be designated as <em>role.PAIRED</em> (numerical value is 2).</p>
</div>
<div class="section" id="apid">
<h2>APID<a class="headerlink" href="#apid" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">uint256</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">APID</span><span class="p">;</span>
</pre></div>
</div>
<p>This mapping shows numerical ID of a provider address.</p>
<p>When a provider is deploying Wi-Fi AP, frontend client could
query value of this mapping with the Ethereum address
of the provider. Then the unique numerical ID can be shown in SSID.</p>
<p>There are two reasons for this mapping:</p>
<ul class="simple">
<li>SSID has String length limit. A full length Ethereum address exceeds such limitation, however, a truncated address is not easy to resolve.</li>
<li>Ethereum address behind a wireless AP could be protected by this APID. Currently, <a class="reference internal" href="#providerbehind">providerBehind</a> is publicly declared, but it’s high availability is not necessary.</li>
</ul>
</div>
<div class="section" id="id1">
<h2>APID_counter<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">uint256</span> <span class="nx">APID_counter</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>This number will be assigned to a newly registered provider.</p>
<p>If a successful call of <span class="xref std std-ref">surProvider</span> is initiated by
a user without <span class="xref std std-ref">APID’ value,
APID_counter will be assigned to the new provider’s `APID</span> mapping,
and the value of APID_counter will be updated by +1 as <span class="xref std std-ref">surProvider</span> implemented.</p>
</div>
<div class="section" id="balance">
<h2>balance<a class="headerlink" href="#balance" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">uint256</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">balance</span><span class="p">;</span>
</pre></div>
</div>
<p>Mapping balance uses Ethereum address as key and number of tokens as value.</p>
<p>Token balance of each contract user can be viewed by calling this mapping.</p>
<p>Only one internal function <span class="xref std std-ref">_transfer</span> can manipulate values of this mapping without restriction.</p>
</div>
<div class="section" id="providerbehind">
<h2>providerBehind<a class="headerlink" href="#providerbehind" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">uint256</span> <span class="p">=&gt;</span> <span class="nx">address</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">providerBehind</span><span class="p">;</span>
</pre></div>
</div>
<p>This mapping is a conversed version of <a class="reference internal" href="#apid">APID</a> mapping.</p>
<p>APID of an account is a key of this mapping.
The value corresponds to the key (APID grabbed from SSID)
is the Ethereum address of the AP host.</p>
</div>
<div class="section" id="numberofusers">
<h2>numberOfUsers<a class="headerlink" href="#numberofusers" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">uint</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">numberOfUsers</span><span class="p">;</span>
</pre></div>
</div>
<p>For each contract user of provider role, this mapping is important.</p>
<ul class="simple">
<li>When a receiver is linked to a provider by <span class="xref std std-ref">link</span> function, mapping value of the provider should be added by 1.</li>
<li>When the receiver has successfully called function <a href="#id2"><span class="problematic" id="id3">`payAndLeave`_</span></a>, the value of numberOfUsers should be decreased by 1.</li>
<li>Only when this mapping value is 0 which is the default value, can a provider call function <a href="#id4"><span class="problematic" id="id5">`surReceiver`_</span></a> to switch user role back to <em>role.ISRECEIVER</em>.</li>
</ul>
</div>
<div class="section" id="providerof">
<h2>providerOf<a class="headerlink" href="#providerof" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">address</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">providerOf</span><span class="p">;</span>
</pre></div>
</div>
<p>For each user of <em>role.PAIRED</em> who was of <em>role.ISRECEIVER</em> before a successful call of <span class="xref std std-ref">link</span> function,
this mapping will be assigned by the Ethereum address of the linked provider.</p>
<p>Only users being served has nonzero providerOf mapping.
Value of this mapping will be reset to 0 after a successful call of <a href="#id6"><span class="problematic" id="id7">`payAndLeave`_</span></a>.</p>
</div>
<div class="section" id="priceof">
<h2>priceOf<a class="headerlink" href="#priceof" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">uint256</span><span class="p">)</span> <span class="kr">public</span> <span class="nx">priceOf</span><span class="p">;</span>
</pre></div>
</div>
<p>When a receiver intends to switch user role to be a provider,
function <span class="xref std std-ref">surProvider</span> will request a input that specifies pricing of this AP service to deploy in DataToken/MB.</p>
</div>
<div class="section" id="usageof">
<h2>usageOf<a class="headerlink" href="#usageof" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">uint256</span><span class="p">))</span> <span class="kr">public</span> <span class="nx">usageOf</span><span class="p">;</span>
</pre></div>
</div>
<p>This is a mapping designed to verify data usage information to prevent cheating on both sides when issuing payment.</p>
<p>A function <a href="#id8"><span class="problematic" id="id9">`_tolerance`_</span></a> is defined to check whether data usage record can reach a consensus.</p>
<p>If records from both provider and receiver agree with each other, the receiver will pay for the amount of data usage specified by the provider.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">What will happen if a consensus is not reached has not been defined yet!</p>
</div>
</div>
<div class="section" id="passwd">
<h2>passwd<a class="headerlink" href="#passwd" title="Permalink to this headline">¶</a></h2>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">mapping</span> <span class="p">(</span><span class="nx">address</span> <span class="p">=&gt;</span> <span class="nx">string</span><span class="p">)</span> <span class="nx">internal</span> <span class="nx">passwd</span><span class="p">;</span>
</pre></div>
</div>
<p>This mapping is where provider can store their designated key to generate dynamic PIN for wireless AP authentication.</p>
<p>User will be require to input a password when function <span class="xref std std-ref">surProvider</span> is called.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contract Variables</a><ul>
<li><a class="reference internal" href="#owner">owner</a></li>
<li><a class="reference internal" href="#tokenname">tokenName</a></li>
<li><a class="reference internal" href="#totalsupply">totalSupply</a></li>
<li><a class="reference internal" href="#reportperiod">reportPeriod</a></li>
<li><a class="reference internal" href="#coherencetime">coherenceTime</a></li>
<li><a class="reference internal" href="#tokenprice">tokenPrice</a></li>
<li><a class="reference internal" href="#usagetolerance">usageTolerance</a></li>
<li><a class="reference internal" href="#apid-counter">APID_counter</a></li>
<li><a class="reference internal" href="#role">role</a></li>
<li><a class="reference internal" href="#forcepaytype">forcePayType</a></li>
<li><a class="reference internal" href="#identification">identification</a></li>
<li><a class="reference internal" href="#apid">APID</a></li>
<li><a class="reference internal" href="#id1">APID_counter</a></li>
<li><a class="reference internal" href="#balance">balance</a></li>
<li><a class="reference internal" href="#providerbehind">providerBehind</a></li>
<li><a class="reference internal" href="#numberofusers">numberOfUsers</a></li>
<li><a class="reference internal" href="#providerof">providerOf</a></li>
<li><a class="reference internal" href="#priceof">priceOf</a></li>
<li><a class="reference internal" href="#usageof">usageOf</a></li>
<li><a class="reference internal" href="#passwd">passwd</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to DataTokenAlpha!</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="InternalFunctions.html"
                        title="next chapter">Internal Functions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ContractVariables.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="InternalFunctions.html" title="Internal Functions"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to DataTokenAlpha!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">DataTokenAlpha  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Zhuoqun Liu.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>